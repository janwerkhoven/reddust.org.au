/*! Scripts for www.reddust.org.au */
function openModal(){var e=700,o="easeOutExpo",a=$("#modals .overlay"),t=$("#modals .modal");t.hasClass("velocity-animating")||($("body").addClass("prevent-scroll"),$("#modals").show(),checkModalCentre(),a.velocity("stop").velocity({opacity:1},e,o),t.velocity("stop").velocity({translateY:["0%","10%"],scale:[1,.9]},e,o))}function closeModal(){var e=400,o="easeOutExpo",a=$("#modals .overlay"),t=$("#modals .modal");t.hasClass("velocity-animating")||(a.velocity("stop").velocity({opacity:0},e,o),t.velocity("stop").velocity({translateY:"10%",scale:.9},e,o,function(){$("#modals").hide(),$("body").removeClass("prevent-scroll")}))}function checkModalCentre(){var e=$("#modals .overlay"),o=$("#modals .modal"),a=$(window).height(),t=o.height()+40;t>=a?e.removeClass("centre-content"):e.addClass("centre-content")}function checkWhetherToAnimateCounters(){var e=$("#landing .counter-wrapper").first().offset().top,o=$(window).scrollTop()+$(window).height();animatingCounters||o>e&&(animatingCounters=!0,animateCounters())}function animateCounters(){$("#impact").find(".counter-wrapper").each(function(){var e=$(this).find("h1").attr("value");$(this).find("h1").attr("id",e);var o={useEasing:!0,useGrouping:!0,separator:",",decimal:".",prefix:"",suffix:""},a=new CountUp(e,0,e,0,5*(e/1709),o);a.start()})}isProduction="www.reddust.org.au"===location.host,environment=isProduction?"production":"staging",function(e,o,a,t,n,i,l){e.GoogleAnalyticsObject=n,e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},e[n].l=1*new Date,i=o.createElement(a),l=o.getElementsByTagName(a)[0],i.async=1,i.src=t,l.parentNode.insertBefore(i,l)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga&&(ga("create","UA-34474019-10","auto"),ga("set",{dimension1:environment}),ga("send","pageview"));var animatingCounters=!1;$(document).ready(function(){var e=!1;$("header nav button").on("click",function(){e?($("body").removeClass("mobile-nav-active"),e=!1):($("body").addClass("mobile-nav-active"),e=!0,$("html, body").animate({scrollTop:0},200))}),"landing"===$("body").attr("id")&&(checkWhetherToAnimateCounters(),$(window).scroll(function(){checkWhetherToAnimateCounters()})),$('a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return $("html, body").animate({scrollTop:e.offset().top},1e3),!1}}),$(".program-slider nav img").on("click",function(){var e=$(this).parents("section"),o=e.children("ul"),a=e.children("ul").children("li").length,t=e.data("current")||1,n=$(this).hasClass("next")?1:-1,i=t+n,l=!!o.hasClass("velocity-animating");i<1?l||o.velocity("stop").velocity({translateX:"150px"},250,"easeOutQuad").velocity({translateX:"0px"},250,"easeInSine"):i>a?l||o.velocity("stop").velocity({translateX:"-150px"},250,"easeOutQuad").velocity({translateX:"0px"},250,"easeInSine"):e.data("current",i).find("ul").velocity("stop").velocity({left:-100*(i-1)+"%"},800,"easeOutExpo")}),$(".tiles.people li").on("click",function(){var e=$(this).find(".bio").clone(),o=$(this).find(".img").clone(),a=$("#modals .modal");$("#modals .modal .content").html("").append(o).append(e),openModal(),o.length?a.addClass("has-image"):a.removeClass("has-image")}),$(".tiles.partners li").on("click",function(){if(console.log($(window).width()),$(window).width()<=720){var e=$(this).find(".front img").clone(),o=$(this).find(".back h2").clone(),a=$(this).find(".back p").clone(),t=$(this).find(".back a").clone(),n=$("#modals .modal");n.find(".img").html("").append(e),n.find(".bio").html("").append(o).append(a).append(t),openModal(),e.length?n.addClass("has-image"):n.removeClass("has-image")}}),$("#modals").find(".overlay, .modal>svg").on("click",function(){closeModal()}),$("#modals .modal").on("click",function(e){e.stopPropagation()}),$("#modals").find(".overlay, .modal>svg").on("click",function(){closeModal()}),$("#modals .modal").on("click",function(e){e.stopPropagation()}),$("#modals").length&&$(window).resize(function(){checkModalCentre()})});